{% extends "base.html" %}


{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="fw-bold">TO DO LIST</h1>
    <a href="{% url 'todolist:task-create' %}" class="btn btn-primary link-to-page">
      Add task
    </a>
  </div>

  <div class="task-list">
    {% for task in task_list %}
      <div class="task-item mb-4 p-3 rounded">
        <h4>{{ task }}</h4>
        <p>
          {% if task.done %}
            <strong>Done</strong>
            <a href="{% url 'todolist:task-done' pk=task.id %}" class="btn btn-secondary link-to-page mr-2">
              Undo
            </a>
          {% else %}
            Not done
            <a href="{% url 'todolist:task-done' pk=task.id %}" class="btn btn-secondary link-to-page mr-2">
              Complete
            </a>
          {% endif %}

        </p>
        <p>
          <strong>Created:</strong> {{ task.datetime }}<br>
          <strong>Tags:</strong>  {% for tag in task.tags.all %}
          {{ tag.name }}
        {% endfor %}
        </p>
        <div class="task-actions">
          <a href="{% url 'todolist:task-update' pk=task.id %}" class="btn btn-secondary link-to-page mr-2">
            Update
          </a>
          <a href="{% url 'todolist:task-delete' pk=task.id %}" class="btn btn-danger link-to-page">
            Delete
          </a>
        </div>
        <hr>
      </div>
    {% empty %}
      <p>No tasks available.</p>
    {% endfor %}
  </div>
{% endblock %}

